<!DOCTYPE HTML PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/strict.dtd">
<html>
 <head>
  <style>
.author {
   font-weight: bold;
}
</style>
 </head>
 <body>
  <h1>Navigator Plugin</h1>
  <div class="author">
   <p>Authors: </p>
   <ul>
    <li>
     Dale Anson
    </li>
    <li>
     Alan Ezust
    </li>
    <li>
     Shlomy Reinstein
    </li>
   </ul>
   <p>
   Version: @@build.num@@</p>
   <p>Build Date: @@tstamp@@ </p>
  </div>
  <p>
  <h3>Introduction:</h3>
  <p>
  The Navigator Plugin provides a set of "Back" and "Forward" actions similar to a web browser. This is surprisingly
  handy.
  <p>

  <h3>Configuration:</h3>
  <p>
  The Navigator configuration has these options:
  <ul>
  <li>
  Group history items by file - if checked, the popup history will list only the last location visited in a file.  This
  makes it easy to quickly jump back to the last place you were working in a file.
  </li>
  <li>
  Group history items by line - if checked, the popup history will list only the first location visited in a line.  This
  means that clicking in the same line at a different offset in that line will not be recorded in the history.
  </li>
  <li>
  Show Navigator on toolbar - see below for more information about showing the Navigator "Back" and "Forward" buttons.
  </li>
  <li>
  Scope:
   <ul>
      <li>
      View scope
      </li>
      <li>
      EditPane scope
      </li>
   </ul>
   See the section "How Navigator Works" for a discussion of the difference between View and EditPane scope.
   The scope can also be toggled using the Navigator menu.  If you find yourself regularly switching between scopes, you
   can assign a shortcut to the toggle action.  If you never split your Views, then you it doesn't matter which of these
   you use.
   </li>
   <li>
   Maximum History Size - the maximum number of positions that Navigator will remember in either the back history
   or the forward history.
   </li>
   <li>
   Show line text in history - in addition to showing the file name and line number of a position, the history
   popup can also show the text of the line at that position, which can be helpful in finding the right position
   to jump to.
   </li>
   <li>
   Show syntax highlighting in history list - when showing the text at the position, the popup can also display that
   text with the syntax highlighting used in the text area.
   </li>
   <li>
   Show stripes in history list - selecting this option will cause the history list items to be displayed with
   alternating colors in the list, which can make it easier to pick out the item you want.  On the other hand,
   depending on the look and feel you are using, this can be horribly ugly.
   </li>
   <li>
   Visible rows in history list - you can choose how many rows you'd like to see at once in the history list.
   The default is 10 rows.
   </li>
  </ul>
  <p>
  The Navigator works in a "visible" or an "invisible" way. I find it is handy to use shortcut keys for the actions
  "back" and "forward".
  <p>
  <b>Tip: </b>Bind the actions to Alt+RIGHT and Alt+LEFT and get used to them, because those shortcuts work in
  IE/Firefox/Konqueror too.
  <p>
  The Navigator buttons can become visible in many ways:
  <ol>
   <li>
    Go to Plugins - Plugin Options - Navigator and check "Show Navigator on toolbar".  This was broke for about 7 years,
    is finally fixed in the 2.0 release and is probably the best choice if you generally use the jEdit tool bar.
   </li>
   <li>
    Go to Global Options - ToolBar, add a button to the toolbar. Select the drop-down menu that lists all of the
    installed plugins, 	choose "Navigator" and you should see a list of Navigator's actions. 	Add "Back" and "Forward"
    actions to your toolbar, and move them to the desired location. This is not the best choice since the buttons won't
    gray out when the history is empty.
   </li>
   <li>
    Go to Global Options - Docking and add a dockable for the Navigator to	one of the docking areas. These buttons will
    grey out if the corresponding stacks are empty.
   </li>
  </ol>
  <p>
  It is possible to access the previously visited locations directly.  From the main menu to Plugins - Navigator, then
  choose either "Back List" or "Forward List" or "Combined List", then you can pick a specific location from the list popup.  You can also
  assign a shortcut to these lists (Alt+1, Alt+2, and Alt+3, perhaps) by going to the main menu, Utilities, Global Options,
  Shortcuts, choose Plugin: Navigator, and set the shortcut keys.

  <h3>How Navigator works</h3>
  Navigator tracks PositionChanging EditBus messages. These can be sent by the core, or plugins, to notify
  Navigator that the current position should be saved.  Each time the buffer changes,
  a plugin jumps the caret to another line in your buffer, or you mouse click in the TextArea, the location of
  the caret is recorded in the Navigator history.  Going back moves the caret to the
  previous position.  If that previous position happened to be in a different file, then that file will be opened.
  <p>
  Some jEdit terminology: A <strong><i>View</i></strong> is a
  main jEdit window.  You can open more Views by using the View menu and selecting "New View".  Within a View, an
  <strong><i>EditPane</i></strong>
  is the part of the View that contains the text area.  You can open more EditPanes by using the View menu and selecting
  one of the "Splitting" options.  Each split is an EditPane.
  <p>
  <strong>View Scope:</strong>
  <br>
  In View scope, Navigator remembers edit panes.  So if you have a split pane, and are scrolling and clicking back and forth
  between the panes, going back (or forward) will also set focus on the appropriate edit pane, even if you have the
  same file open in both panes.  This works for as many splits as you have.
  <p>
  If you close an edit pane, the history for those files is NOT lost.  Quite often, you'll have just one edit pane
  in your View, you'll split the view to compare a file or to see different parts of the same file,
  then you'll close the view.  The history will be retained for any PositionChanging events that were
  tracked during the split.  The splits won't be restored as you go back or forward, though.
  <p>
  Each View has its own Navigator and history.  This means that if you regularly work with two Views
  open, going back in one View will not take you the other View, rather, the caret will move to the previous location
  in the current view.  If you close a View, the history for that View is lost.
  <p>
  History is not persisted between jEdit sessions, so if you close jEdit, the history is lost.
  <p>
  <strong>EditPane Scope:</strong>
  <br>
  In EditPane scope, Navigator keeps a separate history for each EditPane.  Going back or forward will cause the
  caret to move only within the current EditPane.  To go back and forward in a different EditPane, you'll have
  to switch to that EditPane.
  <p>
  If you close an EditPane, the history for files within that EditPane is lost.
  <p>
  If you change scope, no history is lost.  This means that you can be using View scope, change to EditPane scope to limit
  back and forward browsing to the current EditPane, then switch back to View scope to browse the entire history.  Keep in
  mind that while in EditPane scope, if you close an EditPane then the history for that EditPane will be lost.

  <h3>Changelog </h3>

  <ul>
   <li>
    <b>Version 2.1</b>
    <ul>
    <li> Fix for tracker 2824226, Navigator hangs when opening multiple files at once. </li>
    <li> Fixed a bug when jumping back, if 'current' was not the current position, it was pushed to the backHistory stack but the location wasn't changed (only after the next 'back' it would change). </li>
    <li> Fix for tracker 2824680, keep line numbers in history, not caret positions. Added option to group by line. </li>
    <li> Restored a method that was inadvertently removed to get the toolbar for the Navigator dockable.</li>
    </ul>
   </li>

   <li>
    <b>Version 2.0</b>
    <ul>
      <li>
      Navigator mapped to Views again, so each View has its own Navigator.  EditPanes are tracked also,
      so if you have the same file open in a split pane, Navigator will correctly go back and forth appropriately.  This
      is a better fix for bug 2493691.
      </li>
      <li>
      Added option for View or EditPane scope.  Originally, Navigator worked on View scope, then Alan changed it to
      EditPane scope in version 1.2.  Now there is an option for the user to choose which scope is preferred.  I find
      View scope particularly nice when doing diffs.
      </li>
      <li>
      Added "Clear" action to plugin menu so the history can be cleared.
      </li>
      <li>
      Lots of code clean up, removed unused methods, restructured history model.
      </li>
      <li>
      Fixed the "add to toolbar" option so it is no longer buggy.  It's still a hack, but it's a clean hack.
      </li>
      <li>
      Modified the history popups to also show the actual text of the line.  This can make it easier to jump
      to the right line since there is now a little bit of context displayed with the location.  The text
      can also be syntax highlighted if desired.
      </li>
      <li>
      Added text field to option panel so user can set the maximum size of the history.
      </li>
      <li>
      Added text field to option panel so user can set the number of rows displayed in the history popup.
      </li>
      <li>
      Added ability to show the back and forward history combined in a single list.
      </li>
      <li>
      Added unit tests.
      </li>
    </ul>
   </li>

   <li>
   <b>Version 1.7, all from Shlomy</b>
   <ul>
    <li>Fixed bug #2493691: Navigator move to the wrong offset. When jumping
    to a history location which is open in jEdit in another edit pane, that
    edit pane could be made current in the view, but the caret location was set
    in the originator edit pane (where the navigator jump command was issued).</li>
    <li>Added an option to group history items by file - i.e. several history
    positions in the same file will show up in the pop up as a single item - of
    the first position in that file.</li>
    <li>Made some cleanup, got rid of compilation warnings of unused
    variables.</li>
    <li>Made the history model a bit simpler, avoiding the redundant
    "terminating null" in the history vector.</li>
   </ul>
   </li>


  <li>
    <b>Version 1.6 </b>
    <ul>
     <li>
      Navigator truly mapped to EditPanes now (Alan Ezust)
     </li>
     <li>
      Updated for jedit 4.3pre15 (using PositionChanging EBMessage).
     </li>
     <li>
      #2011801: Do not hold closed buffers in memory (Kazutoshi Satoda)
     </li>
    </ul>
   </li>


   <li>
    <b>Version 1.5 </b>
    <ul>
     <li>
      Popup History shows line numbers instead of caret positions. (shlomy reinstein)
     </li>
     <li>
      Memory leaks removed (Chris Grindstaff)
     </li>
    </ul>
   </li>

   <li>
    <b>Version 1.4 </b>
    <ul>
     <li>
      New popup history actions: <b>back list</b> and <b>forward list</b>, for non-sequential history jumps. (shlomy reinstein)
     </li>
    </ul>
   </li>

   <li>
    <b>Version 1.2 </b>
    <ul>
     <li>
      Creates one Navigator for each EditPane, instead of each View. This means each editpane has its own navigation
      history. (alan ezust)
     </li>
    </ul>
   </li>

   <li>
    <b>Version 1.1</b> (alan ezust)
    <ul>
     <li>
      Listens to new (4.3pre3) EBMessage event: <tt>EditPaneUpdate.BUFFER_CHANGING</tt>.
     </li>
     <li>
      Bugfixes
     </li>
    </ul>
   </li>

   <li>
    <b>Version 1.0</b> (Dale Anson)
    <ul>
     <li>
      Initial release.
     </li>
     <li>
      Bugfixes
     </li>
    </ul>
   </li>

  </ul>
 </body>
</html>

