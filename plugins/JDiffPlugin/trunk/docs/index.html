<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 3.2//EN">
<html>
<head>
<meta name="generator" content="HTML Tidy, see www.w3.org">
<title>JDiff Plugin</title>
</head>
<body>
<h2>JDiff Plugin @@build.num@@</h2>

<p>Authors: André Kaplan, Mark Wickens, Dale Anson</p>

<h3>Legal Notice</h3>

<p>Permission is granted to copy, distribute and/or modify this
document under the terms of the GNU Free Documentation License,
Version 1.1 or any later version published by the Free Software
Foundation; with no Invariant Sections, Front-Cover Texts or
Back-Cover Texts, each as defined in the license. A copy of the
license can be found in the file COPYING.DOC.txt included with
jEdit.</p>
<hr>
<a href="#presentation">Presentation</a><br>
<a href="#usage">Usage</a><br>
<a href="#display">Display</a><br>
<a href="#other_commands">Other commands</a><br>
<a href="#options">Options</a><br>
<a href="#license">License</a><br>
<a href="#feedback">Feedback</a><br>
<a href="#history">Change log</a><br>
<a href="#credits">Credits</a><br><br>

<hr>
<a name="presentation">

<h3>Presentation</h3>

<p>JDiffPlugin is a visual diff and merge utility for jEdit.</p>

<p>It features:</p>

<ul>
<li>
<p>Diff overviews (local and global)</p>
</li>

<li>
<p>Synchronized scrolling</p>
</li>

<li>
<p>Ignore case option</p>
</li>

<li>
<p>Ignore leading and trailing whitespace option</p>
</li>

<li>
<p>Ignore amount of whitespace option</p>
</li>

<li>
<p>Ignore all whitespace option</p>
</li>

<li>
<p>Normal diff output</p>
</li>

<li>
<p>Visual merging of differences between two files</p>
</li>
</ul>

<hr>
<a name="usage">

<h3>Usage</h3>

<p>The simplest method is to open the Dual Diff Dialog (Plugins
-&gt; JDiff -&gt; <b>Show dual diff dialog</b>) and choose the
files to compare.</p>

<p>But you can also:</p>

<ol>
<li>
<p>Split your view in two (vertically)</p>
</li>

<li>
<p>Edit the buffers you want to compare:</p>

<ul>
<li>
<p>the buffer on the left is the original</p>
</li>

<li>
<p>the buffer on the right is the revision</p>
</li>
</ul>
</li>

<li>
<p>Activate JDiff: <b>Plugins</b> &gt; <b>JDiff</b>&gt; <b>Dual
Diff</b></p>
</li>
</ol>

<p>Or if you have JDiff docked:</p>

<ol>
<li>Open the dockable.</li>

<li>Click the 'Diff' button:

<p><img alt="" src="delta.png"></p>
</li>
</ol>

<p>Figure 1 shows the result</p>

<img alt="" src="diff_overview.jpg" format="JPG">

<hr>
<a name="display">

<h3>Display</h3>

<p>Once JDiff is activated as in Figure 1, you should see:</p>

<ul>
<li>
<p>Text Highlights</p>
</li>

<li>
<p>A local overview (right of the original)</p>
</li>

<li>
<p>A global overview (right of the revision)</p>
</li>

<li>
<p>If you have activated the Diff dockable, you'll also see the
merge controls and the line overview.</p>
</li>
</ul>

<h3>Color conventions</h3>

<p>By default:</p>

<ul>
<li>
<p>Changed lines appear in yellow</p>
</li>

<li>
<p>Deleted (from the original) lines appear in red</p>
</li>

<li>
<p>Inserted (to the revision) lines appear in green</p>
</li>

<li>
<p>Invalid lines appear as thin dark grey lines.</p>

<ul>
<li>
<p>In the original, invalid lines indicate where a block was
inserted in the revision.</p>
</li>

<li>
<p>In the revision, invalid lines indicate where a block was
deleted in the original.</p>
</li>
</ul>
</li>
</ul>

<h3>Local overview</h3>

<p>The local overview shows how the visible
changed/inserted/deleted blocks from the original and the
revision relate to each other. Merging between files can be
performed by clicking a right arrow in the local overview, which
will select the corresponding text from the original and replace
the related text in the revision. The blocks to be merged are
indicated by vertical black bars so it is obvious which code is
moving. Clicking a left arrow in the local overview will select
the corresponding text block from the revision and replace the
related text in the original. Note that the code moves are by
block, not by line, so the entire diff will be moved.</p>

<h3>Global overview</h3>

<p>The global overview should help you estimate how the two
edited buffers differ. It also displays two cursors which
indicate the visible parts of the two buffers. Clicking within
the global overview will move the view to the corresponding part
of the file.</p>

<h3>Line overview</h3>

<p>The line overview shows character-by-character differences
between the current cursor lines within a diff block. This makes
it easy to see the difference of even a single character change
between the left and right lines. This overview only shows one
line at a time of the diff block, move the cursor within the
block to see the individual line differences for each line.</p>

<p>
The left line is shown above the right line.  Above the left line is a
bounding graphic to show the start and end of the line, which helps see
whitespace at the start and end of the line.  If the option to ignore line
separators is unchecked, the line separator characters will be shown beyond
the end of the bounding graphic so that any differences in line separators
between the two files can be easily seen.
</p>

<h3>Merge controls</h3>

<p>The merge control has 8 buttons. From left to right in
horizontal mode:</p>

<ol>
<li><img alt="" src="diff.jpg">&nbsp; Start a diff.</li>

<li><img alt="" src="unsplit.jpg"> &nbsp; Unsplit the view, which
ends the diff session.</li>

<li><img alt="" src="next_diff.jpg">&nbsp; Move to next
diff.</li>

<li><img alt="" src="move_right.jpg">&nbsp; Move current diff to
right. This replaces the diff block on the right with the text
from the left diff block. If used with the Shift key, this will move
all non-conflicting diff blocks at once.</li>

<li><img alt="" src="move_left.jpg">&nbsp; Move current diff to
left. This replaces the diff block on the left with the text from
the right diff block. If used with the Shift key, this will move
all non-conflicting diff blocks at once.</li>

<li><img alt="" src="prev_diff.jpg">&nbsp; Move to previous
diff.</li>

<li><img alt="" src="swap.jpg">&nbsp; Swap text areas, that is,
put the file that was on the left on the right, and put the file
that was on the right on the left.</li>

<li><img alt="" src="refresh.jpg">&nbsp; Refresh the diff.</li>
</ol>

<p>The merge controls can also be displayed vertically or in a
compact form (as shown in the image above), and with or without
the line overview. The vertical display is convenient for the
left or right docking areas. The horizontal layout works well in
the top or bottom docking areas. The compact layout uses less
vertical space in the top or bottom docking areas when the line
overview is also displayed.</p>

<hr>
<a name="other_commands">

<h3>Other commands</h3>

<p>These commands are available on the plugin menu:</p>

<ul>
<li>
<p><b>Refresh</b>: refreshes the diff display</p>
</li>

<li>
<p><b>Go to previous/next difference</b></p>
</li>

<li>
<p><b>Ignore case</b>: toggles the "Ignore case" option for the
current diff</p>
</li>

<li>
<p><b>Ignore leading and trailing whitespace</b>: toggles the
"Ignore leading and trailing whitespace" option for the current
diff</p>
</li>

<li>
<p><b>Ignore amount of whitespace</b>: toggles the "Ignore amount
of whitespace" option for the current diff</p>
</li>

<li>
<p><b>Ignore line separators</b>: toggles the "Ignore line separators"
option for the current diff</p>
</li>

<li>
<p><b>Ignore all whitespace</b>: toggles the "Ignore all
whitespace" option for the current diff</p>
</li>

<li>
<p><b>Normal Diff Output</b>: generates a diff file using the
normal method</p>
</li>
</ul>

<hr>
<a name="options">

<h3>JDiff Options</h3>

<p>These settings can be made in the JDiff General options panel, Plugins
-&gt; Plugin Options... -&gt; JDiff Plugin -&gt; General</p>

<h3>Diff options</h3>

<p>You can configure how JDiff performs a diff. JDiff
can:</p>

<ul>
<li>
<p>Ignore case: lines are compared without regard for case.</p>
</li>

<li>
<p>Ignore leading and trailing whitespace: lines are compared as
if leading and trailing whitespaces were removed.</p>
</li>

<li>
<p>Ignore amount of whitespace: lines are compared as if any</p>

<ul>
<li>
<p>leading and trailing whitespaces were removed</p>
</li>

<li>
<p>sequence of whitespaces were replaced by one single space.</p>
</li>
</ul>
</li>

<li>
<p>Ignore line separators: lines are compared as if all line separators
were removed.
</li>


<li>
<p>Ignore all whitespace: lines are compared as if:</p>

<ul>
<li>
<p>any leading, trailing and inner whitespaces were removed</p>
</li>
</ul>
</li>
</ul>

<p>
There are two performance settings:
</p>
<ul>
<li>
Faster diff heuristic: When set to true, the diff comparison uses a heuristic to speed it up.
      With this heuristic, for files with a constant small density
      of changes, the algorithm is linear in the file size.
</li>
<li>
Find minimal set of changes: When set to true, the diff algorithm returns a guaranteed minimal
        set of changes.  This can make the diff slower, sometimes much slower.
</li>
</ul>

<h3>UI Options</h3>
You can control these user interface options:

<ul>
   <li>Automatically show dockable on diff: when starting a dual diff, automatically show the control and line diff dockable.</li>
   <li>Show line diff in dockable: show the line diff as part of the control and line diff dockable.  Some people don't need the line diff and use a horizontal or vertical control layout to help conserve screen space.</li>
   <li>Scroll horizontally to next/prev diff: this is useful when diffing files with long lines, JDiff will automatically scroll the text area so the first diff is in view.</li>
   <li>Select first word of next/prev diff: if checked, the first work of a diff section will be selected, which can help speed editing of diffs.</li>
   <li>Beep on error: JDiff can make noise when there is an error.  It's pretty annoying, but some people like it. :)</li>
   <li>Restore View after diff: JDiff can restore the split pane configuration to how it was before a diff session was started.  This is useful for those cases where you might have the view split into 3 or more sections.  After the diff session is ended, JDiff will restore the view to the same split configuration as before the diff session started.</li>
   <li>Restore caret positions after diff: JDiff can also restore the caret position for each text area after a diff session has ended.</li>
</ul>

<h3>Control layout</h3>

<p>Merge control layout</p>

<ul>
<li>Horizontal: default, merge control buttons in a single
horizontal line. Best used docked at top or bottom.<br>
<img src="horizontal_controls.jpg"><br><br></li>

<li>Vertical: merge controls in a single vertical line. Best used
docked at the left or right.<br><br>
<img src="vertical_controls.jpg"><br><br></li>

<li>Compact: merge controls in 2 columns of 4 buttons. Occupies
smallest amount of screen space when used with the line
overview.<br><br>
<img src="compact_controls.jpg"><br><br></li>
</ul>

<h3>Colors</h3>
<p>These settings can be made in the JDiff Colors options panel, Plugins
-&gt; Plugin Options... -&gt; JDiff Plugin -&gt; Colors</p>

<p>You can configure the colors of:</p>

<ul>
<li>
<p>Changed lines</p>
</li>

<li>
<p>Deleted lines</p>
</li>

<li>
<p>Inserted lines</p>
</li>

<li>
<p>Invalid lines</p>
</li>

<li>
<p>Left cursor in the global overview</p>
</li>

<li>
<p>Right cursor in the global overview</p>
</li>
</ul>

These colors are applied in the text area, the local and global overviews,
and the line diff.  In the text area and local and global overviews, the colors are applied per diff chunk.  In the line diff, the colors are applied per character, so it is easy to tell exactly the difference between two lines.
<hr>
<a name="license">

<h3>License</h3>

<p>The source code is distributed under the GPL. Please see <a
href=
"http://www.fsf.org/copyleft/gpl.html">http://www.fsf.org/copyleft/gpl.html</a></p>

<hr>
<a name="feedback">

<h3>Feedback</h3>

<p>The preferred way to send bug reports is to use the
Sourceforge Bug Tracker at <a href=
"http://sourceforge.net/bugs/?group_id=588">http://sourceforge.net/bugs/?group_id=588</a></p>

<p>You can also write to:</p>

<ul>
<li>
<p>jEdit-users mailing-list <a href=
"mailto:jedit-users@lists.sourceforge.net">jedit-users@lists.sourceforge.net</a></p>
</li>

<li>
<p>or jEdit-devel mailing-list <a href=
"mailto:jedit-devel@lists.sourceforge.net">mailto:jedit-devel@lists.sourceforge.net</a></p>
</li>
</ul>

<hr>
<a name="history">

<h3>History</h3>

<ul>
<li>
<p>
Version 3.1.1 (Dale Anson and Shlomy Reinstein)<br>
- fixed some bugs in the implementation of 'patch' - incorrect usage of the
  line numbers in the patch file, incorrect computation of offsets between
  the original and the patched file<br>
</p>
</li>
<li>
<p>
Version 3.1.0 (Dale Anson)<br>
- Added ability to move all non-conflicting diff changes at once<br>
- Added two new configuration options, one to use faster diff heuristics and a second to minimize the number of diff hunks<br>
- Fixed the 'Diff' button on the tool bar so it is active at the right time<br>
- Fixed a problem where unsplitting would cause a stack overflow error<br>
</p>
</li>
<li>
<p>
Version 3.0.0 (Dale Anson)<br>
- applied patch from Sean McNamara to optionally scroll text areas to first diff and
to optionally select the first word of the diff<br>
- adjusted line diff to scroll to make first diff visible<br>
- combined color option panes to make it easier to set the highlight colors<br>
- now requires CommonControls 0.9.5 to take advantage of the new version of KappaLayout<br>
- fix for 2775807, text areas not restored to previous positions<br>
- major rewrite of synchro-scroll code (part of fix tracker 2777214)<br>
- rewrote diff highlighting to fix tracker 2777214<br>
- added option so user can turn off synchro-scroll if desired<br>
- major rewrite of DualDiff, which altered the API significantly, so I bumped
the version number to 3.0.  This rewrite was prompted by an attempt to fix
tracker 277214, and was necessary to clean up some threading issues.<br>
</p>
</li>
<li>
<p>
Version 2.2.1 (Dale Anson)
Bug fix release:<br>
- 2755385, problem with moving diff hunk from one side to the other
when hunk is at bottom of buffer.<br>
- 2540573, added option for user to decide if the View should be
restored after a diff, added message to user indicating if files had been
closed during diff.<br>
</p>
</li>
<li>
<p>
Version 2.2.0 (Dale Anson)<br>
- fix for 2095399, don't unsplit and resplit when the view is already
set correctly for a diff.<br>
- added option to turn off annoying beeps<br>
</p>
</li>
<li>
<p>
Version 2.1.0 (Dale Anson)<br>
- fix for 1963921, rendering problem in overview bar<br>
- added scrollbar to line diff so the end of long lines can
actually be seen<br>
- fixes to better follow look and feel, editor scheme settings, and
user color settings<br>
- added code to auto-identify the patch file type so the user
doesn't have to know the type and appropriate error messages can be
displayed for unsupported types<br>
- fix for 1996223, JDiff now restores split configuration to its
previous state after a diff<br>
- fix for 1969175, JDiff was showing dockable when it shouldn't<br>
</p>
</li>
<li>
<p>
Version 2.0 (Dale Anson)<br>
- added ability to apply normal and unified diff<br>
- added EditBus message needed by SVNPlugin to know when diff
session is ended<br>
</p>
</li>
<li>
<p>
Version 1.9.0 (Dale Anson)<br>
- Added dependency on CommonControls plugin.<br>
- Moved button tooltip text to props file.<br>
- Fix for 1888242.<br>
- Major code clean up and refactoring to clean up display repainting
problems.<br>
- Removed code and references to the virtual overview, that hasn't
worked since jEdit 4.2 and can't be fixed easily due to changes in jEdit's
Display Manager.<br>
- Fixed the little left and right arrows so they are the same size.<br>
- Fixed line diff to use same anti-alias setting used in the main text
area.<br>
- Fix for 1891865.<br>
- Added optional layouts for toolbar and line diff.<br>
- Fix for 1892782.<br>
- Added Diff and Refresh buttons to toolbar.<br>
</p>
</li>
<li>
<p>
Version 1.8 (Dale Anson)<br>
Bug fixes, added "Diff" and "Refresh" buttons to
merge controls, major code refactoring to clean up the various
painting issues.<br>
</p>
</li>

<li>
<p>Version 1.7. Added a dockable to display line diff and merge
controls. Added merge functionality, added mouse listener to
global overview. (Dale Anson)</p>
</li>

<li>
<p>Version 1.5.2. Fixes to ignore whitespace options (1522563 -
aconnor78)</p>
</li>

<li>
<p>Version 1.5, updated to work with jEdit 4.3pre3+</p>
</li>

<li>
<p>Version 1.4. Updated to work with jEdit v4.2+, including edits
for new JEditTextArea handling and new plugin API.</p>
</li>

<li>
<p>Version 1.3.2. Last pre-jEdit v4.2 version of plugin by
Andr??.</p>
</li>
</ul>

<hr>
<a name="credits">

<h3>Credits</h3>

<ul>
<li>
<p>Stuart D. Gathman ported the GNU diff algorithm to Java. See
<a href=
"http://www.bmsi.com/java/">http://www.bmsi.com/java/</a></p>
</li>

<li>
<p>Some code and ideas borrowed from JDiff by Mike Dillon
(mdillon@jedit.org). See <a href=
"http://sourceforge.net/projects/jdiff">http://sourceforge.net/projects/jdiff</a></p>
</li>
</ul>
</body>
</html>

