<?xml version="1.0" ?>

<!-- Attempt at invoking make from the current buffer's directory -->
<!--  Jeff Jackowski (http://ro.com/~jeffj), Jan 22, 2004 -->

<!DOCTYPE COMMANDO SYSTEM "commando.dtd">

<COMMANDO>
	<UI>
		<CAPTION LABEL="Makefile settings (if applicable)">
			<ENTRY LABEL="Rule name" VARNAME="ruleName" DEFAULT=""/>
			<ENTRY LABEL="Makefile name" VARNAME="makefile" DEFAULT="Makefile"/>
			<!-- <TOGGLE LABEL="Search for Makefile" VARNAME="search" DEFAULT="true"/> -->
		</CAPTION>
		<CAPTION LABEL="Advanced">
			<ENTRY LABEL="Additional parameters" VARNAME="params" DEFAULT=""/>
		</CAPTION>
	</UI>

	<COMMANDS>
		<COMMAND SHELL="System" CONFIRM="FALSE">
			buf = new StringBuffer();
			buf.append("make");

			if (new File(makefile).exists()) {
				buf.append(" -f \""+makefile+"\"");
				if (!ruleName.equals(""))
					buf.append(" "+ruleName);
			}
			else
				buf.append(" "+MiscUtilities.getFileNameNoExtension(buffer.getName());

			if (!params.equals(""))
				buf.append(" "+params);

			return buf.toString();
		</COMMAND>
	</COMMANDS>
</COMMANDO>
